+++
title = "Hard fork 1 and hard fork policy"

[extra]
author = "Thorkil Schmidiger"
ogdescription = "Hard fork to increase block size to allow for more transaction throughput."
+++

**TL;DR**: The Neptune Cash blockchain is hard forking to increase transaction throughput. From a size limit of 2 MB per block, to one of 8 MB per block. The hard fork will happen at block height 6.000. To stay on the right chain, you have to upgrade your neptune-core version to 0.2.0 which is now released. We plan and hope to only need four to five hard forks in total before dissolving the company and passing on leadership of the blockchain to the community.

![](trident-and-fork.png)

# Hardfork 1

In many aspects, the launch on February 11, 2025 has gone well: Difficulty has increased far beyond our imagination, Neptune was listed on an exchange a mere three weeks after launch, an external team built a [better looking block explorer](https://neptune.vxb.ai/) than the one we developed, another team is working on a mining pool, and there are probably more ongoing developments that we're not aware of. We also haven't spotted any bugs in our consensus mechanism, giving us increased confidence in the soundness of Neptune's cryptography.

Before patting ourselved too much on the back though, we did make one fairly serious oversight: When we defined the maximum size of a block to be 2 megabytes[^1], we hadn't properly understood how much space the transaction inputs take up. To make a long story short, each transaction input is up to 40kB, depending of the age of the inputs, leaving only room for ~30 inputs per block which is obviously too little for a block time of 10 minutes. We have two ways of addressing this problem: a short-term and a long-term solution. The short-term solution is simply to increase the allowed block size from 2MB to 8MB which will increase the maximum number of inputs per block to around 200. The long-term solution is to represent these authentication paths in a more sparse manner[^4].

To continue the positive momentum of Neptune, we have decided to increase the block size limit sooner rather than later. The exact changes can be read in [this pull request](https://github.com/Neptune-Crypto/neptune-core/pull/502).

Those of you who are only interested in the mechanics of Neptune can stop reading here. But if you want some insight into the philosophy guiding our work, you may find the rest of the article interesting.

## The good, the bad, and the ugly

There are three relevant definitions when considering changes to a blockchain: soft forks, hard forks, and reorganizations. A soft fork is a change to the rules where old versions of the software still consider the new blocks valid. If we for example were to make a rule that all block hashes had to start with the hexadecimal character "a", that would be a soft fork, as the old neptune-core versions would still consider the new blocks valid. A hard fork is a change to the rules such that new blocks will be considered invalid by the old software, an increase in the maximum allowed block size is a good example of this.  And a reorganization is the rewriting of history: Where the state of the blockchain is rolled back to an earlier state thus deleting some transactions from history.

In an idealized world, the rules of a blockchain would never change, so neither soft forks, hard forks, or reorganizations would be needed. But since development takes time and we all need feedback from the real world, not all changes can be considered equally bad. We consider soft forks the least problematic and reorganizations the most problematic[^5]. With hard forks in the middle.

It's worth noting though that we consider hard forks problematic for two reasons:
1. They risk splitting the network thus creating confusion about the true state of the blockchain
2. They introduce an element of arbitrary rule which is antithetical to the ethos of Blockchain: money without rulers.

To provide a level of expectation and restrict the arbitrary power of current and future Neptune developers, the following list shows which hard forks we foresee:
1. increase in block size limit from 2MB to 8MB.
2. Better representation of transaction inputs, increasing transaction throughput by at least 10x.
3. New version of Triton VM and integration of its capabilities into consensus programs.
4. Added support for lock-free UTXOs, to provide better smart contract functionality.
5. Added support for transaction-chaining, to allow the spending of unconfirmed transactions.

This list can obviously change, and we hope that some of the changes can be bundled up, reducing the number of future hard forks. It's also worth noting that some changes, such the ability to sync by downloading only one block, a feature we call succintness, will be achievable through a soft fork.


[^1]: 250.000 B-field elements to be precise. B-field elements are the words that the Triton VM uses. Triton VM is how the Neptune protocol gets its ZK-STARK proofs.
[^2]: To make a short story long, Neptune is based on the UTXO model that Bitcoin also uses, and in the UTXO model you have to reference all inputs to your transactions. Unlike in Bitcoin though, the inputs to a transaction cannot easily be linked to the outputs of previous transaction, as the connection between the two are hidden behind a zero-knowledge cryptographic proof. To prove that a particular input hasn't already been spent the transaction initiator provides authentication paths into an MMR which allows for a sparse representation of a Bloom filter. It's the size of these MMR authentication paths that was not sufficiently analyzed prior to main net launch.
[^3]: Each block contains only one transaction, as all transactions included in a block is merged into one before being mined.
[^4]: We're discussing three proposals to reduce the size of transaction inputs, all of them making use if ["Fast Authentication Structure Authentication"](../learn/authentication-structure-authentication.md). The least efficient of these suggestions decrease the size of transaction outputs by around 90 %.
[^5]: If you're reading this, it hopefully goes without saying that we intend and hope for exactly zero reorganizations.
